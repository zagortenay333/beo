fn foo -> String {
    .print("hello there");
    return "asdfsaf";
}

var x = foo();

fn main {
    .print(x);
}

/*
fn main {
    foo.print1(1, 2, 3, 4);
    bar.print2(1, 2, 3, 4);

    test_var_defs();
    test_fn_calls();
    test_ifs();
    test_records();
    test_while();
    register_stress_test();
}

fn test_var_defs {
    var a1: Bool = false;
    var a2: Bool = true;
    var a3: Int = 42;
    var a4: Float = 42.42;
    var a5: String = "asdf";
    var a6: []Int = [1, 2, 3];

    a3 += 1;
    a6[2] += 1;

    .print(a3);
    .print(a5);
    .print(a6);
}

fn test_records {
    // @todo Right now we don't handle the case when initializers
    // are omitted from record literal:
    // 
    //   var x = Foo{};
    //   x.x; // This has value nil...
    //

    record Foo {
        x: Int;
        y: Float;
    }

    var x = Foo{ x=3, y=42.0 };
    .print(x);
    x.x += 1;
    x.y += 1.0;
    .print(x);
}

fn test_fn_calls {
    .print(fib(1));

    fn fib (n: Int) -> Int {
        if n <= 1 do return n;
        return fib(n-1) + fib(n-2);
    }
}

fn test_ifs {
    var a = true;

    a = false;

    if a {
        .print("hello");
    } else {
        .print("hi");
    }

    if a do .print("hello");
}

fn test_while {
    var i = 0;
    while i < 10 {
        .print("while");
        i += 1;
    }
}

fn register_stress_test {
    var x1 = 1;
    var x2 = 1;
    register_stress_test1();
    [1, 2];
    register_stress_test2();
}

fn register_stress_test1 () {
    var x1 = 1;
    var x2 = 1;
    var x3 = 1;
    var x4 = 1;
    var x5 = 1;
    var x6 = 1;
    var x7 = 1;
    var x8 = 1;
    var x9 = 1;
    var x10 = 1;
    var x11 = 1;
    var x12 = 1;
    var x13 = 1;
    var x14 = 1;
    var x15 = 1;
    var x16 = 1;
    var x17 = 1;
    var x18 = 1;
    var x19 = 1;
    var x20 = 1;
    var x21 = 1;
    var x22 = 1;
    var x23 = 1;
    var x24 = 1;
    var x25 = 1;
    var x26 = 1;
    var x27 = 1;
    var x28 = 1;
    var x29 = 1;
    var x30 = 1;
    var x31 = 1;
    var x32 = 1;
    var x33 = 1;
    var x34 = 1;
    var x35 = 1;
    var x36 = 1;
    var x37 = 1;
    var x38 = 1;
    var x39 = 1;
    var x40 = 1;
    var x41 = 1;
    var x42 = 1;
    var x43 = 1;
    var x44 = 1;
    var x45 = 1;
    var x46 = 1;
    var x47 = 1;
    var x48 = 1;
    var x49 = 1;
    var x50 = 1;
    var x51 = 1;
    var x52 = 1;
    var x53 = 1;
    var x54 = 1;
    var x55 = 1;
    var x56 = 1;
    var x57 = 1;
    var x58 = 1;
    var x59 = 1;
    var x60 = 1;
    var x61 = 1;
    var x62 = 1;
    var x63 = 1;
    var x64 = 1;
    var x65 = 1;
    var x66 = 1;
    var x67 = 1;
    var x68 = 1;
    var x69 = 1;
    var x70 = 1;
    var x71 = 1;
    var x72 = 1;
    var x73 = 1;
    var x74 = 1;
    var x75 = 1;
    var x76 = 1;
    var x77 = 1;
    var x78 = 1;
    var x79 = 1;
    var x80 = 1;
    var x81 = 1;
    var x82 = 1;
    var x83 = 1;
    var x84 = 1;
    var x85 = 1;
    var x86 = 1;
    var x87 = 1;
    var x88 = 1;
    var x89 = 1;
    var x90 = 1;
    var x91 = 1;
    var x92 = 1;
    var x93 = 1;
    var x94 = 1;
    var x95 = 1;
    var x96 = 1;
    var x97 = 1;
    var x98 = 1;
    var x99 = 1;
    var x100 = 1;
    var x101 = 1;
    var x102 = 1;
    var x103 = 1;
    var x104 = 1;
    var x105 = 1;
    var x106 = 1;
    var x107 = 1;
    var x108 = 1;
    var x109 = 1;
    var x110 = 1;
    var x111 = 1;
    var x112 = 1;
    var x113 = 1;
    var x114 = 1;
    var x115 = 1;
    var x116 = 1;
    var x117 = 1;
    var x118 = 1;
    var x119 = 1;
    var x120 = 1;
    var x121 = 1;
    var x122 = 1;
    var x123 = 1;
    var x124 = 1;
    var x125 = 1;
    var x126 = 1;
    var x127 = 1;
    var x128 = 1;
    var x129 = 1;
    var x130 = 1;
    var x131 = 1;
    var x132 = 1;
    var x133 = 1;
    var x134 = 1;
    var x135 = 1;
    var x136 = 1;
    var x137 = 1;
    var x138 = 1;
    var x139 = 1;
    var x140 = 1;
    var x141 = 1;
    var x142 = 1;
    var x143 = 1;
    var x144 = 1;
    var x145 = 1;
    var x146 = 1;
    var x147 = 1;
    var x148 = 1;
    var x149 = 1;
    var x150 = 1;
    var x151 = 1;
    var x152 = 1;
    var x153 = 1;
    var x154 = 1;
    var x155 = 1;
    var x156 = 1;
    var x157 = 1;
    var x158 = 1;
    var x159 = 1;
    var x160 = 1;
    var x161 = 1;
    var x162 = 1;
    var x163 = 1;
    var x164 = 1;
    var x165 = 1;
    var x166 = 1;
    var x167 = 1;
    var x168 = 1;
    var x169 = 1;
    var x170 = 1;
    var x171 = 1;
    var x172 = 1;
    var x173 = 1;
    var x174 = 1;
    var x175 = 1;
    var x176 = 1;
    var x177 = 1;
    var x178 = 1;
    var x179 = 1;
    var x180 = 1;
    var x181 = 1;
    var x182 = 1;
    var x183 = 1;
    var x184 = 1;
    var x185 = 1;
    var x186 = 1;
    var x187 = 1;
    var x188 = 1;
    var x189 = 1;
    var x190 = 1;
    var x191 = 1;
    var x192 = 1;
    var x193 = 1;
    var x194 = 1;
    var x195 = 1;
    var x196 = 1;
    var x197 = 1;
    var x198 = 1;
    var x199 = 1;
    var x200 = 1;
    var x201 = 1;
    var x202 = 1;
    var x203 = 1;
    var x204 = 1;
    var x205 = 1;
    var x206 = 1;
    var x207 = 1;
    var x208 = 1;
    var x209 = 1;
    var x210 = 1;
    var x211 = 1;
    var x212 = 1;
    var x213 = 1;
    var x214 = 1;
    var x215 = 1;
    var x216 = 1;
    var x217 = 1;
    var x218 = 1;
    var x219 = 1;
    var x220 = 1;
    var x221 = 1;
    var x222 = 1;
    var x223 = 1;
    var x224 = 1;
    var x225 = 1;
    var x226 = 1;
    var x227 = 1;
    var x228 = 1;
    var x229 = 1;
    var x230 = 1;
    var x231 = 1;
    var x232 = 1;
    var x233 = 1;
    var x234 = 1;
    var x235 = 1;
    var x236 = 1;
    var x237 = 1;
    var x238 = 1;
    var x239 = 1;
    var x240 = 1;
    var x241 = 1;
    var x242 = 1;
    var x243 = 1;
    var x244 = 1;
    var x245 = 1;
    var x246 = 1;
    var x247 = 1;
    var x248 = 1;
    var x249 = 1;
    var x250 = 1;
    var x251 = 1;
    var x252 = 1;
    [1, 60];
}

fn register_stress_test2 () {
    var x1 = 1;
    var x2 = 1;
    var x3 = 1;
    var x4 = 1;
    var x5 = 1;
    var x6 = 1;
    var x7 = 1;
    var x8 = 1;
    var x9 = 1;
    var x10 = 1;
    var x11 = 1;
    var x12 = 1;
    var x13 = 1;
    var x14 = 1;
    var x15 = 1;
    var x16 = 1;
    var x17 = 1;
    var x18 = 1;
    var x19 = 1;
    var x20 = 1;
    var x21 = 1;
    var x22 = 1;
    var x23 = 1;
    var x24 = 1;
    var x25 = 1;
    var x26 = 1;
    var x27 = 1;
    var x28 = 1;
    var x29 = 1;
    var x30 = 1;
    var x31 = 1;
    var x32 = 1;
    var x33 = 1;
    var x34 = 1;
    var x35 = 1;
    var x36 = 1;
    var x37 = 1;
    var x38 = 1;
    var x39 = 1;
    var x40 = 1;
    var x41 = 1;
    var x42 = 1;
    var x43 = 1;
    var x44 = 1;
    var x45 = 1;
    var x46 = 1;
    var x47 = 1;
    var x48 = 1;
    var x49 = 1;
    var x50 = 1;
    var x51 = 1;
    var x52 = 1;
    var x53 = 1;
    var x54 = 1;
    var x55 = 1;
    var x56 = 1;
    var x57 = 1;
    var x58 = 1;
    var x59 = 1;
    var x60 = 1;
    var x61 = 1;
    var x62 = 1;
    var x63 = 1;
    var x64 = 1;
    var x65 = 1;
    var x66 = 1;
    var x67 = 1;
    var x68 = 1;
    var x69 = 1;
    var x70 = 1;
    var x71 = 1;
    var x72 = 1;
    var x73 = 1;
    var x74 = 1;
    var x75 = 1;
    var x76 = 1;
    var x77 = 1;
    var x78 = 1;
    var x79 = 1;
    var x80 = 1;
    var x81 = 1;
    var x82 = 1;
    var x83 = 1;
    var x84 = 1;
    var x85 = 1;
    var x86 = 1;
    var x87 = 1;
    var x88 = 1;
    var x89 = 1;
    var x90 = 1;
    var x91 = 1;
    var x92 = 1;
    var x93 = 1;
    var x94 = 1;
    var x95 = 1;
    var x96 = 1;
    var x97 = 1;
    var x98 = 1;
    var x99 = 1;
    var x100 = 1;
    var x101 = 1;
    var x102 = 1;
    var x103 = 1;
    var x104 = 1;
    var x105 = 1;
    var x106 = 1;
    var x107 = 1;
    var x108 = 1;
    var x109 = 1;
    var x110 = 1;
    var x111 = 1;
    var x112 = 1;
    var x113 = 1;
    var x114 = 1;
    var x115 = 1;
    var x116 = 1;
    var x117 = 1;
    var x118 = 1;
    var x119 = 1;
    var x120 = 1;
    var x121 = 1;
    var x122 = 1;
    var x123 = 1;
    var x124 = 1;
    var x125 = 1;
    var x126 = 1;
    var x127 = 1;
    var x128 = 1;
    var x129 = 1;
    var x130 = 1;
    var x131 = 1;
    var x132 = 1;
    var x133 = 1;
    var x134 = 1;
    var x135 = 1;
    var x136 = 1;
    var x137 = 1;
    var x138 = 1;
    var x139 = 1;
    var x140 = 1;
    var x141 = 1;
    var x142 = 1;
    var x143 = 1;
    var x144 = 1;
    var x145 = 1;
    var x146 = 1;
    var x147 = 1;
    var x148 = 1;
    var x149 = 1;
    var x150 = 1;
    var x151 = 1;
    var x152 = 1;
    var x153 = 1;
    var x154 = 1;
    var x155 = 1;
    var x156 = 1;
    var x157 = 1;
    var x158 = 1;
    var x159 = 1;
    var x160 = 1;
    var x161 = 1;
    var x162 = 1;
    var x163 = 1;
    var x164 = 1;
    var x165 = 1;
    var x166 = 1;
    var x167 = 1;
    var x168 = 1;
    var x169 = 1;
    var x170 = 1;
    var x171 = 1;
    var x172 = 1;
    var x173 = 1;
    var x174 = 1;
    var x175 = 1;
    var x176 = 1;
    var x177 = 1;
    var x178 = 1;
    var x179 = 1;
    var x180 = 1;
    var x181 = 1;
    var x182 = 1;
    var x183 = 1;
    var x184 = 1;
    var x185 = 1;
    var x186 = 1;
    var x187 = 1;
    var x188 = 1;
    var x189 = 1;
    var x190 = 1;
    var x191 = 1;
    var x192 = 1;
    var x193 = 1;
    var x194 = 1;
    var x195 = 1;
    var x196 = 1;
    var x197 = 1;
    var x198 = 1;
    var x199 = 1;
    var x200 = 1;
    var x201 = 1;
    var x202 = 1;
    var x203 = 1;
    var x204 = 1;
    var x205 = 1;
    var x206 = 1;
    var x207 = 1;
    var x208 = 1;
    var x209 = 1;
    var x210 = 1;
    var x211 = 1;
    var x212 = 1;
    var x213 = 1;
    var x214 = 1;
    var x215 = 1;
    var x216 = 1;
    var x217 = 1;
    var x218 = 1;
    var x219 = 1;
    var x220 = 1;
    var x221 = 1;
    var x222 = 1;
    var x223 = 1;
    var x224 = 1;
    var x225 = 1;
    var x226 = 1;
    var x227 = 1;
    var x228 = 1;
    var x229 = 1;
    var x230 = 1;
    var x231 = 1;
    var x232 = 1;
    var x233 = 1;
    var x234 = 1;
    var x235 = 1;
    var x236 = 1;
    var x237 = 1;
    var x238 = 1;
    var x239 = 1;
    var x240 = 1;
    var x241 = 1;
    var x242 = 1;
    var x243 = 1;
    var x244 = 1;
    var x245 = 1;
    var x246 = 1;
    var x247 = 1;
    var x248 = 1;
    var x249 = 1;
    var x250 = 1;
    var x251 = 1;
    var x252 = 1;
    [1, 33];
}
*/
